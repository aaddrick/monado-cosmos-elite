gui: Refactor GUI state tracker into a base that can be more easily reused
and that brings in fewer dependencies.
